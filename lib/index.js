(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)})([function(a,b,c){'use strict';function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a,b){try{var c=i[a](b),f=c.value}catch(a){return void e(a)}c.done?d(f):Promise.resolve(f).then(g,h)}function g(a){f('next',a)}function h(a){f('throw',a)}var i=a.apply(b,c);g()})}}function f(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function g(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function h(a,b,c){return b&&g(a.prototype,b),c&&g(a,c),a}function i(a,b){return a.split('.').reduce(function(a,b){return a&&a.hasOwnProperty(b)&&a[b]},b)}Object.defineProperty(b,'__esModule',{value:!0}),b.default=void 0;var j=function(a){return a&&a.__esModule?a:{default:a}}(c(1)),k=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=c.logger,e=void 0===d?console:d,g=c.authorization,h=void 0===g?null:g,i=c.enableExperimentalRouteResolver;f(this,a),this.baseUrl=b,this.logger=e,this.authorization=h,this.links=this.fetchLinks(),this.cache={},void 0!==i&&i&&this.enableExperimentalRouteResolver()}return h(a,[{key:'get',value:function(){var a=e(regeneratorRuntime.mark(function a(b,c){var d;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0='',a.next=3,this.getLink(b);case 3:return a.t1=a.sent,a.t2=c,d=a.t0.concat.call(a.t0,a.t1,'/').concat(a.t2),a.t3=this,a.next=9,this.fetchDocument(d);case 9:return a.t4=a.sent,a.abrupt('return',a.t3.documentData.call(a.t3,a.t4));case 11:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:'findAll',value:function(){var a=e(regeneratorRuntime.mark(function a(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=arguments;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=1<p.length&&void 0!==p[1]?p[1]:{},d=c.limit,e=void 0===d?-1:d,f=c.sort,g=void 0===f?'':f,h=c.filter,i=void 0===h?'':h,j=c.attributes,k=void 0===j?null:j,l=c.relationships,m=void 0===l?{}:l,a.next=3,this.collectionLink(b,{sort:g,filter:i,attributes:k,page:-1===e||50<e?'':'page[limit]='.concat(e)});case 3:return n=a.sent,o=this.expandRelationships(m),a.abrupt('return',this.paginate(n,e,o));case 6:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:'expandRelationships',value:function(a){return function a(b,c){return Object.getOwnPropertyNames(b).reduce(function(d,e){return d[e]=c(b[e]),b[e].relationships&&(d[e].relationships=a(b[e].relationships,c,{})),d},{})}(a,function(a){return'string'==typeof a?{field:a}:a},{})}},{key:'paginate',value:function(a,b,c){var e=this,f=[],g=0,h=new Set([]),i={};if(c){var j=['.links.next'],k=function a(b){Object.getOwnPropertyNames(b).forEach(function(c){j.push('.data.[].relationships.'.concat(b[c].field,'.links.related')),b[c].anticipate&&Object.getOwnPropertyNames(b[c].anticipate).forEach(function(a){j.push(b[c].anticipate[a])}),b[c].relationships&&a(b[c].relationships)})};k(c),j.length&&(i['x-push-please']=j.join('; '))}var l=function(b){return h.add(b),e.fetchDocument(b,i).then(function(c){h.delete(b),a=c.links.next||!1;var i=e.documentData(c),j=Array.isArray(i)?i:[i];return g+=j?j.length:0,f.push.apply(f,d(j||[])),Promise.resolve(f)})},m=[],n=function(){return a&&!h.has(a)&&(-1===b||g<b)&&m.push(l(a)),!f.length&&m.length?m.shift().then(function(){return f}):Promise.resolve(f)},o=0,p=regeneratorRuntime.mark(function c(){return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(f.length||h.size||a)){c.next=5;break}return c.next=3,(-1===b||o<b)&&n().then(function(a){o++;var b=a.shift();return b||null});case 3:c.next=0;break;case 5:case'end':return c.stop();}},c,this)})();return p.canContinue=function(){return f.length||h.size||a},p.addMore=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;return-1===a?b=-1:b+=a},a&&!h.has(a)&&(-1===b||g<b)&&m.push(l(a)),this.toConsumer(p,c)}},{key:'toConsumer',value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,c=this;return{consume:function(d){var f=1<arguments.length&&void 0!==arguments[1]&&arguments[1],g=[],h=c.decorateWithRelationships(function(a,b){g.push(f?function(){return b?d(a,b):d(a)}:b?d(a,b):d(a))},b);return new Promise(function(b,c){(function d(e){e?e.then(function(b){b&&h(b),d(a.next().value)}).catch(c):Promise.all(g).then(function(){b(!!a.canContinue()&&a.addMore)}).catch(c)})(a.next().value)}).then(function(a){return new Promise(function(){var b=e(regeneratorRuntime.mark(function b(c,d){var e,h;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!f){b.next=9;break}case 1:if(!g.length){b.next=9;break}if(e=g.shift(),h=e(),!(h instanceof Promise)){b.next=7;break}return b.next=7,h.catch(d);case 7:b.next=1;break;case 9:c(a);case 10:case'end':return b.stop();}},b,this)}));return function(){return b.apply(this,arguments)}}())})}}}},{key:'debugger',value:function(){var a=this;return function(b){if(b.errors){var c=function(b){a.logger.info(''.concat(b.title,': ').concat(b.detail,'. %s'),b.links.info)};b.errors.forEach(c)}else;}}},{key:'decorateWithRelationships',value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=c?function(d){var e={};return Object.getOwnPropertyNames(c).forEach(function(a){var f,g=c[a];e[a]=(f=i('relationships.'.concat(g.field,'.links.related'),d))?b.paginate(f,g.limit||-1,g.relationships||null):Promise.reject()}),a(d,e)}:a;return d}},{key:'fetchDocument',value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=Object.assign({headers:new Headers(Object.assign({accept:'application/vnd.api+json'},b)),credentials:'include'},c);return this.authorization&&d.headers.set('authorization',this.authorization),fetch(a,d).then(function(a){return a.ok?a.json():new Promise(function(){var b=e(regeneratorRuntime.mark(function b(c,d){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.t0=d,b.next=3,a.json().catch(function(){d(a.statusText)});case 3:b.t1=b.sent,(0,b.t0)(b.t1);case 5:case'end':return b.stop();}},b,this)}));return function(){return b.apply(this,arguments)}}())})}},{key:'documentData',value:function(a){if(a.hasOwnProperty('data'))return a.data;if(a.hasOwnProperty('errors'))throw new Error(a);else throw new Error('The server returned an unprocessable document with no data or errors.')}},{key:'getLink',value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.links.then(function(c){return c.hasOwnProperty(a)||Promise.reject('\''.concat(a,'\' is not a valid type for ').concat(b.baseUrl,'.')),c[a]})}},{key:'fetchLinks',value:function(){return this.fetchDocument(''.concat(this.baseUrl,'/jsonapi')).then(function(a){return a.links}).catch(this.debugger())}},{key:'filter',value:function(a){return new j.default(a)}},{key:'collectionLink',value:function(){var a=e(regeneratorRuntime.mark(function a(b){var c,d,e,f,g,h,i=arguments;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=1<i.length&&void 0!==i[1]?i[1]:{},d=c.sort,e=c.filter,f=c.page,g=c.attributes,h='',h+=e.length?'?'.concat(e):'',h+=d.length?''.concat(h.length?'&':'?','sort=').concat(d):'',h+=g?''.concat(h.length?'&':'?','fields[').concat(b,']=').concat(g.join(',')):'',h+=f.length?''.concat(h.length?'&':'?').concat(f):'',a.t0='',a.next=9,this.getLink(b);case 9:return a.t1=a.sent,a.t2=h,a.abrupt('return',a.t0.concat.call(a.t0,a.t1).concat(a.t2));case 12:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:'enableExperimentalRouteResolver',value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;this.resolve=b?function(){var b=e(regeneratorRuntime.mark(function b(c){var d,e;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,d={"x-push-please":'.jsonapi.individual',accept:'application/json'},b.next=4,a.fetchDocument(''.concat(a.baseUrl,'/router/translate-path?path=').concat(c,'&_format=json'),d);case 4:return e=b.sent,b.abrupt('return',a.get(e.jsonapi.resourceName,e.entity.uuid));case 8:throw b.prev=8,b.t0=b['catch'](0),new Error(b.t0.message);case 11:case'end':return b.stop();}},b,this,[[0,8]])}));return function(){return b.apply(this,arguments)}}():void 0}}]),a}();b.default=k},function(a,b){'use strict';function c(a){return c='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},c(a)}function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function f(a,b,c){return b&&e(a.prototype,b),c&&e(a,c),a}Object.defineProperty(b,'__esModule',{value:!0}),b.default=void 0;var g=function(){function a(b){d(this,a),this.conditions=b(i,function(a){return function(b){return b[a]}})}return f(a,[{key:'compile',value:function(a){var b=regeneratorRuntime.mark(function a(){var b;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b=1;case 1:return a.next=4,b++;case 4:a.next=1;break;case 6:case'end':return a.stop();}},a,this)})();return function c(d,e){var f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,g=b.next().value,h=d.length?''.concat(d,'&'):'';if(e.members){var j='filter['.concat(g,'][group]'),k=f?''.concat(j,'[conjunction]=').concat(e.conjunction,'&').concat(j,'[memberOf]=').concat(f):''.concat(j,'[conjunction]=').concat(e.conjunction);return''.concat(h).concat(e.members.reduce(function(a,b,d){return c(a,b,d,g)},k))}var l='filter['.concat(g,'][condition]'),m=i.process(e,a),n='';return n+=''.concat(l,'[path]=').concat(encodeURIComponent(m.path)),i.unaryOperators.has(m.operator)?n+='&'.concat(l,'[value]=').concat(encodeURIComponent(m.value)):!i.nullOperators.has(m.operator)&&m.value.forEach(function(a){n+='&'.concat(l,'[value][]=').concat(encodeURIComponent(a))}),n+='&'.concat(l,'[operator]=').concat(encodeURIComponent(m.operator)),f?''.concat(h).concat(n,'&').concat(l,'[memberOf]=').concat(f):''.concat(h).concat(n)}('',this.conditions)}}]),a}();b.default=g;var h={and:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return h.group(b,'AND')},or:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return h.group(b,'OR')},group:function(a,b){return{conjunction:b,members:a}}},i=function a(b,c){return a.eq(b,c)};i.and=h.and,i.or=h.or,i.eq=function(a,b){return i.condition(a,b,'=')},i.notEq=function(a,b){return i.condition(a,b,'<>')},i.gt=function(a,b){return i.condition(a,b,'>')},i.gtEq=function(a,b){return i.condition(a,b,'>=')},i.lt=function(a,b){return i.condition(a,b,'<')},i.ltEq=function(a,b){return i.condition(a,b,'<=')},i.startsWith=function(a,b){return i.condition(a,b,'STARTS_WITH')},i.contains=function(a,b){return i.condition(a,b,'CONTAINS')},i.endsWith=function(a,b){return i.condition(a,b,'ENDS_WITH')},i.in=function(a,b){return i.condition(a,b,'IN')},i.notIn=function(a,b){return i.condition(a,b,'NOT IN')},i.between=function(a,b){return i.condition(a,b,'BETWEEN')},i.notBetween=function(a,b){return i.condition(a,b,'NOT BETWEEN')},i.null=function(a){return i.condition(a,void 0,'IS NULL')},i.notNull=function(a){return i.condition(a,void 0,'IS NOT NULL')},i.condition=function(a,b,c){return i.validate({path:a,value:b,operator:c})},i.unaryOperators=new Set(['=','<>','>','>=','<','<=','STARTS_WITH','CONTAINS','ENDS_WITH']),i.unaryValueTypes=new Set(['string','boolean','number']),i.binaryOperators=new Set(['BETWEEN','NOT BETWEEN']),i.stringOperators=new Set(['STARTS_WITH','CONTAINS','ENDS_WITH']),i.nullOperators=new Set(['IS NULL','IS NOT NULL']),i.validate=function(a){if(a.operator instanceof Function||a.value instanceof Function)return a;if(i.nullOperators.has(a.operator)){if('undefined'!=typeof a.value)throw new Error('Conditions with an \''.concat(a.operator,'\' operator must not specify a value.'));}else if(i.unaryOperators.has(a.operator)){if(!i.unaryValueTypes.has(c(a.value)))throw new Error('The \''.concat(a.operator,'\' operator requires a single value.'));if(i.stringOperators.has(a.operator)&&'string'!=typeof a.value)throw new Error('The \''.concat(a.operator,'\' operator requires that the condition value be a string.'))}else{if(!Array.isArray(a.value))throw new Error('The \''.concat(a.operator,'\' operator requires an array of values.'));if(i.binaryOperators.has(a.operator)&&2!==a.value.length)throw new Error('The \''.concat(a.operator,'\' operator requires an array of exactly 2 values.'))}return a},i.process=function(a,b){var c=!1,d=function(a){return a instanceof Function?(c=!0,a(b)):a},e={path:d(a.path),operator:d(a.operator)};return i.nullOperators.has(e.operator)||(e.value=d(a.value)),c&&i.validate(e),e}}]);