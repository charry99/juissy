(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)})([function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(1);const e=new d.a('http://jsonapi.test:8080',console),f=(a)=>(b)=>console.log(`${a}:`,b.attributes.title);e.all('node--recipe',{max:3,sort:'title'}).then((a)=>a.forEach(f('Initial')).then((b)=>{console.log(`There are ${b?'more':'no more'} resources!`),b(10),a.forEach(f('Additional')).then((a)=>{console.log(`There are ${a?'more':'no more'} resources!`)})})).catch((a)=>console.log('Error:',a))},function(a,b){'use strict';b.a=class{constructor(a,b){this.baseUrl=a,this.logger=b,this.links=new Promise((b,c)=>{this.fetchDocument(`${a}/jsonapi`).then((a)=>b(a.links||{})).catch((a)=>{this.logger.log('Unable to resolve resource links.'),c(a)})})}get(a,b){return this.withLink(a).then((a)=>this.fetchDocument(`${a}/${b}`)).then((a)=>this.documentData(a)).catch((a)=>(this.logger.log(a),null))}all(a,{max:b=-1,sort:c='',filter:d='page[limit]=2'}={}){return this.withLink(a).then((a)=>{var e=`${a}?${d}`;c.length&&(e+=`&sort=${c}`);var f=[],g=[];const h=new Set([]),i=(a)=>(h.add(a),this.fetchDocument(a).then((b)=>(h.delete(a),e=b.links.next||!1,g.push(...(this.documentData(b)||[])),Promise.resolve(g)))),j=()=>(e&&!h.has(e)&&f.push(i(e)),!g.length&&f.length?f.shift():Promise.resolve(g));var k=0;const l=function*(){for(;g.length||h.size||e;)yield j().then((a)=>{const b=a.shift();return b||null})}();return{forEach:function(a){return new Promise((c,d)=>{const i=(f)=>{if(f)f.then((c)=>{k++,c&&a(c),i((-1===b||k<b)&&l.next().value)}).catch(d);else{c((g.length||h.size||e)&&((a=-1)=>-1===a?b=-1:b+=a))}};i((-1===b||k<b)&&l.next().value)})}}})}fetchDocument(a){return fetch(a).then((a)=>a.ok?a.json():Promise.reject(a.statusText))}documentData(a){return a.hasOwnProperty('data')?a.data:a.hasOwnProperty('errors')?(a.errors.forEach(this.logger.log),null):void this.logger.log('The server returned an unprocessable document with no data or errors.')}withLink(a){return new Promise((b,c)=>{this.links.then((d)=>{d.hasOwnProperty(a)||c(`'${a}' is not a valid type for ${this.baseUrl}.`),b(d[a])}).catch(c)})}}}]);